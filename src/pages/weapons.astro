---
import Layout from '../layouts/Layout.astro';
import { allWeapons, rarityColors } from '../data/weapons';

// レア度グループごとに分類
const legendWeapons = allWeapons.filter(w => w.rarity.tier === 'Legend');
const starWeapons = allWeapons.filter(w => w.rarity.tier === 'Star');
const galaxyWeapons = allWeapons.filter(w => w.rarity.tier === 'Galaxy');
const universeWeapons = allWeapons.filter(w => w.rarity.tier === 'Universe');
---

<Layout title="武器図鑑">
  <div class="space-y-8">
    <!-- 説明 -->
    <div class="bg-white rounded-lg shadow p-6">
      <p class="text-gray-600">
        全武器のレア度と必要ドラバス（L1）数の一覧です。<br>
        <span class="text-sm">※ L1（ドラゴンブレス バズーカ）を基準とした必要本数</span>
      </p>
    </div>

    <!-- Legend -->
    <div class="bg-white rounded-xl shadow overflow-hidden">
      <div class="px-6 py-4 border-b" style={`background: linear-gradient(135deg, ${rarityColors.Legend}20, ${rarityColors.Legend}10)`}>
        <h3 class="text-lg font-bold" style={`color: ${rarityColors.Legend}`}>Legend (レジェンド)</h3>
      </div>
      <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 p-6">
        {legendWeapons.map((weapon) => (
          <div class="text-center p-4 bg-gray-50 rounded-lg hover:bg-amber-50 transition-colors">
            <div
              class="inline-block px-4 py-2 rounded-lg text-white font-bold text-xl mb-2"
              style={`background-color: ${weapon.color}`}
            >
              {weapon.name}
            </div>
            <div class="text-sm text-gray-500">
              {'level' in weapon.rarity && `Level ${weapon.rarity.level}`}
            </div>
            <div class="text-lg font-semibold text-gray-800 mt-2">
              {weapon.requiredL1.toLocaleString()}本
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- Star -->
    <div class="bg-white rounded-xl shadow overflow-hidden">
      <div class="px-6 py-4 border-b" style={`background: linear-gradient(135deg, ${rarityColors.Star}20, ${rarityColors.Star}10)`}>
        <h3 class="text-lg font-bold" style={`color: ${rarityColors.Star}`}>Star (スター)</h3>
      </div>
      <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 p-6">
        {starWeapons.map((weapon) => (
          <div class="text-center p-4 bg-gray-50 rounded-lg hover:bg-purple-50 transition-colors">
            <div
              class="inline-block px-4 py-2 rounded-lg text-white font-bold text-xl mb-2"
              style={`background-color: ${weapon.color}`}
            >
              {weapon.name}
            </div>
            <div class="text-sm text-gray-500">
              {'level' in weapon.rarity && `Level ${weapon.rarity.level}`}
            </div>
            <div class="text-lg font-semibold text-gray-800 mt-2">
              {weapon.requiredL1.toLocaleString()}本
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- Galaxy -->
    <div class="bg-white rounded-xl shadow overflow-hidden">
      <div class="px-6 py-4 border-b" style={`background: linear-gradient(135deg, ${rarityColors.Galaxy}20, ${rarityColors.Galaxy}10)`}>
        <h3 class="text-lg font-bold" style={`color: ${rarityColors.Galaxy}`}>Galaxy (ギャラクシー)</h3>
      </div>
      <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 p-6">
        {galaxyWeapons.map((weapon) => (
          <div class="text-center p-4 bg-gray-50 rounded-lg hover:bg-cyan-50 transition-colors">
            <div
              class="inline-block px-4 py-2 rounded-lg text-white font-bold text-xl mb-2"
              style={`background-color: ${weapon.color}`}
            >
              {weapon.name}
            </div>
            <div class="text-sm text-gray-500">
              {'level' in weapon.rarity && `Level ${weapon.rarity.level}`}
            </div>
            <div class="text-lg font-semibold text-gray-800 mt-2">
              {weapon.requiredL1.toLocaleString()}本
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- Universe -->
    <div class="bg-white rounded-xl shadow overflow-hidden">
      <div class="px-6 py-4 border-b" style={`background: linear-gradient(135deg, ${rarityColors.Universe}20, ${rarityColors.Universe}10)`}>
        <h3 class="text-lg font-bold" style={`color: ${rarityColors.Universe}`}>Universe (ユニバース)</h3>
      </div>
      <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 p-6">
        {universeWeapons.map((weapon) => (
          <div class="text-center p-4 bg-gray-50 rounded-lg hover:bg-red-50 transition-colors">
            <div
              class="inline-block px-4 py-2 rounded-lg text-white font-bold text-xl mb-2"
              style={`background-color: ${weapon.color}`}
            >
              {weapon.name}
            </div>
            <div class="text-sm text-gray-500">
              {'level' in weapon.rarity && `Level ${weapon.rarity.level}`}
            </div>
            <div class="text-lg font-semibold text-gray-800 mt-2">
              {weapon.requiredL1.toLocaleString()}本
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</Layout>
